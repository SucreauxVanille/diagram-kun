<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ€ã‚¤ãƒ¤ã‚°ãƒ©ãƒ å›</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    svg { background-color: #f9f9f9; }
    input { width: 50px; margin-right: 10px; }
    .axis-label { font-size: 12px; fill: #333; }
    .dot { fill: red; }
    .guide-line { stroke: gray; stroke-dasharray: 4; }
  </style>
</head>
<body>
  <h2>ãƒ€ã‚¤ãƒ¤ã‚°ãƒ©ãƒ å›</h2>
  <p>Aãã‚“ã¯ã€ä¸€å®šã®é€Ÿã•ã§å®¶ã‹ã‚‰é§…ã¾ã§å‘ã‹ã£ã¦ã„ã¾ã—ãŸã€‚é€”ä¸­ã§æ™‚è¨ˆã‚’è¦‹ãŸAãã‚“ã¯ã€é§…ã«å‘ã‹ã†é€Ÿåº¦ã‚’å¤‰ãˆã¾ã—ãŸã€‚æ¬¡ã®ã‚°ãƒ©ãƒ•ã¯ã€ãã®æ™‚ã®ç§»å‹•æ™‚é–“ã¨ç§»å‹•è·é›¢ã®é–¢ä¿‚ã‚’ç¤ºã—ãŸã‚‚ã®ã§ã™ã€‚</p>

  <svg id="graph" width="400" height="300"></svg>

  <p>ã“ã®ã¨ãã€</p>
  <ol>
    <li>â‘  å®¶ã‹ã‚‰æ™‚è¨ˆã‚’è¦‹ã‚‹ã¾ã§ã®Aãã‚“ã®åˆ†é€Ÿï¼š<input type="number" id="speed1"> m/åˆ†</li>
    <li>â‘¡ æ™‚è¨ˆã‚’è¦‹ã¦ã‹ã‚‰é§…ã¾ã§ã®Aãã‚“ã®åˆ†é€Ÿï¼š<input type="number" id="speed2"> m/åˆ†</li>
  </ol>
  <button onclick="checkAnswer()">ç­”ãˆåˆã‚ã›</button>
  <p id="result"></p>

  <script>
    const svg = document.getElementById("graph");
    const w = 400, h = 300, margin = 40;
    const xMax = 40, yMax = 500;

    // è»¸ã®æç”»
    const drawAxes = () => {
      svg.innerHTML = `
        <line x1="${margin}" y1="${h - margin}" x2="${w}" y2="${h - margin}" stroke="black"/>
        <line x1="${margin}" y1="${0}" x2="${margin}" y2="${h - margin}" stroke="black"/>
        <text x="${w - 30}" y="${h - 10}" class="axis-label">æ™‚é–“ï¼ˆåˆ†ï¼‰</text>
        <text x="5" y="15" class="axis-label">è·é›¢ï¼ˆmï¼‰</text>
      `;
    };

    // å€¤ â†’ åº§æ¨™å¤‰æ›
    const scaleX = x => margin + (x / xMax) * (w - margin - 10);
    const scaleY = y => (h - margin) - (y / yMax) * (h - margin - 10);

    // å•é¡Œãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
    const a = Math.floor(Math.random() * 10 + 10); // å‰åŠã®é€Ÿã•ï¼ˆ10ã€œ19ï¼‰
    const p = Math.floor(Math.random() * 10 + 5);  // æ™‚è¨ˆã‚’è¦‹ã‚‹æ™‚é–“ï¼ˆ5ã€œ14ï¼‰
    const y1 = a * p;

    const m = (Math.random() < 0.5) ? a + Math.floor(Math.random() * 5 + 1)
                                    : a - Math.floor(Math.random() * Math.min(5, a - 1) + 1); // å¾ŒåŠã®é€Ÿã•
    const q = p + Math.floor(Math.random() * 10 + 5); // åˆ°ç€æ™‚é–“ï¼ˆp+5ã€œp+14ï¼‰
    const y2 = y1 + m * (q - p);

    // æç”»
    drawAxes();

    // æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•
    const path1 = `<line x1="${scaleX(0)}" y1="${scaleY(0)}" x2="${scaleX(p)}" y2="${scaleY(y1)}" stroke="blue" stroke-width="2"/>`;
    const path2 = `<line x1="${scaleX(p)}" y1="${scaleY(y1)}" x2="${scaleX(q)}" y2="${scaleY(y2)}" stroke="blue" stroke-width="2"/>`;

    // â—ã¨è£œåŠ©ç·šãƒ»è»¸ãƒ©ãƒ™ãƒ«ï¼ˆxè»¸ã«p, qï¼yè»¸ã«y1, y2ï¼‰
    const points = [
      { x: p, y: y1 },
      { x: q, y: y2 }
    ];

    let extras = "";
    for (const pt of points) {
      const sx = scaleX(pt.x);
      const sy = scaleY(pt.y);
      extras += `
        <circle cx="${sx}" cy="${sy}" r="4" class="dot"/>
        <line x1="${sx}" y1="${sy}" x2="${sx}" y2="${scaleY(0)}" class="guide-line"/>
        <line x1="${sx}" y1="${sy}" x2="${scaleX(0)}" y2="${sy}" class="guide-line"/>
        <text x="${sx - 5}" y="${scaleY(0) + 15}" class="axis-label">${pt.x}</text>
        <text x="${scaleX(0) - 25}" y="${sy + 5}" class="axis-label">${pt.y}</text>
      `;
    }

    svg.innerHTML += path1 + path2 + extras;

    // æ­£è§£ãƒã‚§ãƒƒã‚¯
    function checkAnswer() {
      const s1 = parseInt(document.getElementById("speed1").value);
      const s2 = parseInt(document.getElementById("speed2").value);
      const res = document.getElementById("result");
      if (s1 === a && s2 === m) {
        res.textContent = "æ­£è§£ï¼ã‚ˆãã§ãã¾ã—ãŸğŸ’®";
        res.style.color = "green";
      } else {
        res.textContent = `æ®‹å¿µï¼æ­£ã—ãã¯â‘  ${a} m/åˆ†ã€â‘¡ ${m} m/åˆ† ã§ã™ã€‚`;
        res.style.color = "red";
      }
    }
  </script>
</body>
</html>
